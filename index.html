<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ore Lavoro (Offline)</title>

<link rel="manifest" href="./manifest.json" />

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

<!-- FullCalendar (global build) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css">

<style>
  body { background:#fff; color:#000; }
  #calendar { max-width: 100%; margin: 16px auto; background:#fff; border-radius:12px; padding:8px; }
  .btn-pres { font-size:18px; padding:14px; border-radius:12px; font-weight:600; }
  .toolbar-sticky{ position: sticky; bottom: 0; background: #fff; padding: 12px 0; }
  /* Migliora leggibilitÃ  in stampa/PDF */
  @media print {
    .no-print { display: none !important; }
    #calendar { padding: 0; }
  }
</style>

<script>
  // Registra il Service Worker (necessario per PWA offline)
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js');
    });
  }
</script>
</head>

<body class="container py-3">
  <header class="d-flex align-items-center justify-content-between">
    <h2 class="m-0">ðŸ“… Ore Lavoro (Offline)</h2>
    <button class="btn btn-outline-dark no-print" id="btn-install" hidden>Installa</button>
  </header>

  <div id="calendar"></div>

  <!-- Comandi rapidi -->
  <div class="row g-2 no-print">
    <div class="col-6"><button class="btn btn-success w-100 btn-pres" onclick="setState('LAVORO')">Lavoro</button></div>
    <div class="col-6"><button class="btn btn-primary w-100 btn-pres" onclick="setState('RIPOSO')">Riposo</button></div>
    <div class="col-6"><button class="btn btn-warning w-100 btn-pres" onclick="setState('MALATTIA')">Malattia</button></div>
    <div class="col-6"><button class="btn btn-danger w-100 btn-pres" onclick="setState('FERIE')">Ferie</button></div>
    <div class="col-12"><button class="btn w-100 btn-pres" style="background:#4cbefc;" onclick="setState('CHIUSO')">Chiuso</button></div>
  </div>

  <hr class="no-print">

  <!-- Azioni -->
  <div class="row g-2 no-print">
    <div class="col-6"><button class="btn btn-outline-secondary w-100" onclick="editDay()">Modifica giorno</button></div>
    <div class="col-6"><button class="btn btn-outline-secondary w-100" onclick="deleteDay()">Cancella giorno</button></div>
    <div class="col-6"><button class="btn btn-outline-dark w-100" onclick="exportBackup()">Backup Export</button></div>
    <div class="col-6"><button class="btn btn-outline-dark w-100" onclick="importBackup()">Backup Import</button></div>
  </div>

  <div class="toolbar-sticky no-print">
    <button class="btn btn-dark w-100 btn-pres" onclick="stampaPDF()">Stampa PDF (A4 â€“ solo calendario)</button>
  </div>

  <!-- Librerie -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- App -->
  <script src="./app.js"></script>
</body>
</html>
